@layer stream, stream-overrides;
@import "stream-chat-react/dist/css/v2/index.css" layer(stream);

html,
body,
#root {
  height: 100%;
}
body {
  margin: 0;
}
#root {
  display: flex;
}

.str-chat__channel-list-wrapper {
  width: 40%;
  border-right: 1px solid rgb(229 231 235); /* gray-200 */
  background-color: theme("colors.white");
}

.str-chat__channel-list {
  margin-top: 0.5rem;
  width: 100%;
  height: 100%;
  padding-right: 0.75rem;
  overflow-x: hidden;
  overflow-y: auto;
}

.str-chat__channel-list .str-chat__channel-preview {
  margin-bottom: 0.5rem;
  width: 100%;
  box-sizing: border-box;
}

.str-chat__channel {
  width: 100%;
  background-color: theme("colors.white");
}
.str-chat__thread {
  width: 45%;
}

@layer stream-overrides {
  .str-chat {
    --str-chat__primary-color: theme("colors.blue.primary");
    --str-chat__active-primary-color: theme("colors.green.dark");
    --str-chat__surface-color: theme("colors.sunken");
    --str-chat__secondary-surface-color: theme("colors.white");
    --str-chat__primary-surface-color: theme("colors.green.primary");
    --str-chat__primary-surface-color-low-emphasis: theme("colors.blue.light");
    --str-chat__border-radius-circle: 0.5rem;
    --str-chat__avatar-background-color: theme("colors.blue.primary");
  }

  /* Message bubble styling - less rounded */
  .str-chat__message-bubble {
    border-radius: 0.5rem !important;
  }

  /* User's own messages - blue-light background */
  .str-chat__message--me .str-chat__message-bubble {
    background-color: #f6f7ff !important;
  }

  /* Other users' messages - blue-dark background */
  .str-chat__message--other .str-chat__message-bubble {
    background-color: #ced8fa !important;
  }

  /* Sender name styling - above message for others */
  .str-chat__message--other .str-chat__message-sender-name {
    display: block !important;
    font-weight: 600 !important;
    margin-bottom: 0.25rem !important;
    font-size: 0.875rem !important;
    color: theme("colors.gray.primary") !important;
  }

  /* Message metadata positioning - below message bubble */
  .str-chat__message-data {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    margin-top: 0.25rem !important;
    gap: 0.125rem !important;
  }

  /* Hide redundant edited status in message header */
  .str-chat__message-simple__actions__action--options + .str-chat__message-edited-timestamp {
    display: none !important;
  }

  /* Style the timestamp and edited indicator */
  .str-chat__message-metadata {
    font-size: 0.75rem !important;
    color: #666 !important;
    display: flex !important;
    align-items: center !important;
    gap: 0.25rem !important;
  }

  .str-chat__message-simple-status {
    font-size: 0.75rem !important;
    color: #666 !important;
  }

  /* Ensure message text container doesn't overflow */
  .str-chat__message-text-inner {
    max-width: 100% !important;
  }

  /* Message actions dropdown styling */
  .str-chat__message-actions-box {
    min-width: 9rem !important;
    border-radius: 0.375rem !important;
    background-color: white !important;
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1) !important;
    border: 1px solid rgba(0, 0, 0, 0.05) !important;
    overflow: hidden !important;
  }

  .str-chat__message-actions-list {
    padding: 0 !important;
    margin: 0 !important;
    list-style: none !important;
  }

  .str-chat__message-actions-list-item {
    margin: 0 !important;
  }

  .str-chat__message-actions-list-item button,
  .str-chat__message-actions-list-item-button {
    width: 100% !important;
    font-size: 0.875rem !important;
    text-align: left !important;
    padding: 0.40rem 1rem !important;
    background-color: white !important;
    border: none !important;
    cursor: pointer !important;
    transition: background-color 150ms ease-in-out !important;
    color: #22070B !important;
    display: block !important;
  }

  .str-chat__message-actions-list-item button:hover,
  .str-chat__message-actions-list-item-button:hover {
    background-color: rgb(229 231 235) !important; /* gray-200 */
  }

  .str-chat__message-actions-list-item:first-child button {
    border-top-left-radius: 0.375rem !important;
    border-top-right-radius: 0.375rem !important;
  }

  .str-chat__message-actions-list-item:last-child button {
    border-bottom-left-radius: 0.375rem !important;
    border-bottom-right-radius: 0.375rem !important;
  }

  /* Typing indicator styling - subtle and positioned at bottom of message list */
  .str-chat__typing-indicator {
    padding: 0.5rem 1rem !important;
    margin: 0 !important;
    background-color: transparent !important;
    border-radius: 0 !important;
    font-style: italic !important;
    color: #666 !important;
    font-size: 0.875rem !important;
  }
}
